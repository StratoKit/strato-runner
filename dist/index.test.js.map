{"version":3,"sources":["../src/index.test.js"],"names":["process","chdir","cwd","test","config","require","default","expect","toMatchSnapshot","registry","start","stop","plugins","started","toBe","state","loadCount","startCount","state2","promise"],"mappings":";;;;;;AAGA;;AAHA;AACA;AACA;AAGAA,OAAO,CAACC,KAAR,CAAc,gBAAKD,OAAO,CAACE,GAAR,EAAL,EAAoB,oBAApB,CAAd;AAEAC,IAAI,CAAC,gBAAD,EAAmB,MAAM;AAC5B,QAAMC,MAAM,GAAGC,OAAO,CAAC,UAAD,CAAP,CAAoBC,OAAnC;;AACAC,EAAAA,MAAM,CAACH,MAAD,CAAN,CAAeI,eAAf;AACA,CAHG,CAAJ;AAKAL,IAAI,CAAC,kBAAD,EAAqB,MAAM;AAC9B,QAAMM,QAAQ,GAAGJ,OAAO,CAAC,YAAD,CAAP,CAAsBC,OAAvC;;AACAC,EAAAA,MAAM,CAACE,QAAD,CAAN,CAAiBD,eAAjB;AACA,CAHG,CAAJ;AAKAL,IAAI,CAAC,OAAD,EAAU,YAAY;AACzB,QAAM;AAACO,IAAAA,KAAD;AAAQC,IAAAA,IAAR;AAAcC,IAAAA,OAAd;AAAuBR,IAAAA;AAAvB,MAAiCC,OAAO,CAAC,GAAD,CAAP,CAAaC,OAApD;;AACA,QAAMI,KAAK,CAAC,MAAD,CAAX;AACAH,EAAAA,MAAM,CAACK,OAAO,CAACT,IAAR,CAAaU,OAAd,CAAN,CAA6BC,IAA7B,CAAkC,IAAlC;AACAP,EAAAA,MAAM,CAACH,MAAM,CAACW,KAAP,CAAaC,SAAd,CAAN,CAA+BF,IAA/B,CAAoC,CAApC;AACAP,EAAAA,MAAM,CAACH,MAAM,CAACW,KAAP,CAAaE,UAAd,CAAN,CAAgCH,IAAhC,CAAqC,CAArC;AACAP,EAAAA,MAAM,CAACH,MAAM,CAACc,MAAP,CAAcF,SAAf,CAAN,CAAgCF,IAAhC,CAAqC,CAArC;AACAP,EAAAA,MAAM,CAACH,MAAM,CAACc,MAAP,CAAcD,UAAf,CAAN,CAAiCH,IAAjC,CAAsC,CAAtC;AACAP,EAAAA,MAAM,CAACH,MAAM,CAACe,OAAR,CAAN,CAAuBL,IAAvB,CAA4B,IAA5B;AACA,QAAMH,IAAI,CAAC,MAAD,CAAV;AACA,QAAMD,KAAK,CAAC,MAAD,CAAX;AACAH,EAAAA,MAAM,CAACH,MAAM,CAACc,MAAP,CAAcF,SAAf,CAAN,CAAgCF,IAAhC,CAAqC,CAArC;AACAP,EAAAA,MAAM,CAACH,MAAM,CAACc,MAAP,CAAcD,UAAf,CAAN,CAAiCH,IAAjC,CAAsC,CAAtC;AACA,CAbG,CAAJ","sourcesContent":["// In theory we should be testing without transpiling from ava\n// But plugins.js transpiling works now and it's annoying to keep transpiling separate\n// Once something ava-webpack comes out we can use that\nimport {join} from 'path'\n\nprocess.chdir(join(process.cwd(), 'tests/test-project'))\n\ntest('initial config', () => {\n\tconst config = require('./config').default\n\texpect(config).toMatchSnapshot()\n})\n\ntest('initial registry', () => {\n\tconst registry = require('./registry').default\n\texpect(registry).toMatchSnapshot()\n})\n\ntest('start', async () => {\n\tconst {start, stop, plugins, config} = require('.').default\n\tawait start('test')\n\texpect(plugins.test.started).toBe(true)\n\texpect(config.state.loadCount).toBe(1)\n\texpect(config.state.startCount).toBe(1)\n\texpect(config.state2.loadCount).toBe(1)\n\texpect(config.state2.startCount).toBe(1)\n\texpect(config.promise).toBe(true)\n\tawait stop('test')\n\tawait start('test')\n\texpect(config.state2.loadCount).toBe(1)\n\texpect(config.state2.startCount).toBe(2)\n})\n"],"file":"index.test.js"}